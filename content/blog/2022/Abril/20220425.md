---
title: "C√≥mo usar TypeScript en CAP"
date: "2022-04-25T16:20:00.000Z"
description: "Hoy os voy a resumir todas las configuraciones que he llevado a cabo para utilizar TypeScript en mi proyecto de CAP."
tags: "CAPM;TYPESCRIPT;CLOUD APPLICATION PROGRAMMING MODEL"
---
¬°Hola!

¬°Cu√°nto tiempo sin escribir! Hoy os voy a resumir todas las configuraciones que he llevado a cabo para utilizar TypeScript en mi proyecto de CAP.

Primero os resumo un poco qu√© es TypeScript aunque entiendo que si est√°is leyendo este art√≠culo es porque sab√©is qu√© es y est√°is interesados en usarlo en CAP :). Es importante primero que se√°is consciente que TypeScript NO nos resuelve los errores en JavaScript, sino que ayuda al programador a poder acotar mucho los errores en tiempo de desarrollo (que es una de las principales carencias de JavaScript, que para ver los errores tienes que estar ejecutando la app) ¬øy esto como lo consigue? Pues b√°sicamente a√±adiendo validaciones al propio javascript y ayud√°ndonos a tipar nuestro javascript.

1. Lo primero es instalarte la librer√≠a ts-node
```shell
npm i -g typescript ts-node
```

2. Lo siguiente es crear el archivo tsconfig.json en el directorio principal de vuestro proyecto (ra√≠z, en este archivo se configura TypeScript y hay bastantes par√°metros para marcar por ejemplo validaciones en el c√≥digo (si quieres marcar los nulos como error, los undefined, etc) y otras caracter√≠sticas interesantes que os invito que explor√©is por vosotros mismos en este link.
Os comento los que yo estoy informando por ahora, algunos se para que sirven, otros no tanto pero esto es ir jugando y leyendo la documentaci√≥n:

```json
{
    "compilerOptions": {
        "target": "es6", //Ajusta la versi√≥n de JavaScript para el c√≥digo que transpila typescript
        "module": "commonjs", //especifica qu√© module code se genera
        "rootDir": "./srv", //de donde salen los ficheros .ts que se deben transpilar
        "baseUrl": "./", //especifica el directorio base para resolver nombres de m√≥dulos no relativos
        "moduleResolution": "node", 
        "skipLibCheck": true,  //validaciones
        "preserveConstEnums": true, //validaciones
        "sourceMap": true, //este es muy importante!! crea un mapeo entre el .ts y el .js m√°s adelante os explico para qu√© sirve
        "allowJs": true, //validaciones
        "strict": true, 
        "strictNullChecks": true, //validaciones
        "strictPropertyInitialization": true, //validaciones
        "esModuleInterop": true
    },
    "include": [
        "./srv/**/*" //las carpetas que se incluyen en la transpilaci√≥n
    ]
}
```

```
‚ö†Ô∏è Como consejo, intentad tener el archivo tsconfig.json lo m√°s restrictivo posible, esto har√° que se validen m√°s aspectos en typescript y haya menos margen de error
```

3. En este punto ya podr√≠amos ejecutarlo con los comandos:
```shell
cds-ts serve world.cds
cds-ts watch
```

Como comentaba antes este par√°metro ‚ÄúsourceMap‚Äù es muy √∫til, ya que si lo activamos lo que har√° es crear un archivo .js.map que mapea el js transpilado con su correspondiente .ts ¬øy esto qu√© quiere decir? Pues quiere decir 2 cosas:

* Podr√© poner breakpoints en mi .ts
* Cuando me salte un error aunque me est√© saltando en el archivo .js (recordemos que esto al final es lo que corre en el navegador) tendremos la l√≠nea correspondiente al fichero .ts

Colocando este par√°metro a true nos quitar√° bastantes dolores de cabeza a la hora de depurar nuestra aplicaci√≥n.üòâ


Adem√°s tambi√©n se pueden crear varios tsconfig.json y hacer que se extiendan, por ejemplo tengo dos entornos y en cada uno quiero aplicar una configuraci√≥n de typescript diferente, pues lo suyo ser√≠a crear un fichero tsconfig.base.json (que contendr√° toda la parametrizaci√≥n com√∫n) y el resto, por ejemplo, tsconfig.test.json o tsconfig.prod.json. Ejecutando el siguiente comando ajustaremos este fichero a lo que nos convenga.

```shell
tsc -p tsconfig.test.json
```

Enlaces de inter√©s:
* [capire ‚Äì Using TypeScript (cloud.sap)](https://cap.cloud.sap/docs/node.js/typescript)
* [TypeScript: Documentation ‚Äì What is a tsconfig.json (typescriptlang.org)](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html)

¬°Hasta la pr√≥xima!üöÄ


